<style>
    a {
        cursor: pointer;
    }
    .scrollerino {
        height: 350px;
        overflow-y: auto;
    }

        .scrollerino::-webkit-scrollbar {
            width: 12px;
            background-color: #808080;
        }

        .scrollerino::-webkit-scrollbar-thumb {
            border-radius: 10px;
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
            background-color: #42DCA3;
        }
    

</style>
<div id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" style="background-color:black" ng-controller="mainController as mc">
    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">

            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a ng-click="mc.goTo('about')">About</a>
                    </li>
                    <li>
                        <a ng-click="mc.goTo('blog')">Blog</a>
                    </li>
                    <li>
                        <a ng-click="mc.goTo('music')">Music</a>
                    </li>
                    <li>
                        <a ng-click="mc.goTo('fitbit')">Fitbit</a>
                    </li>
                    <li>
                        <a ng-click="mc.goTo('blah')">Blah</a>
                    </li>
                    <li>
                        <a ng-click="mc.goTo('contact')">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
    <!-- Intro Header -->
    <header class="intro" id="about">
        <div class="intro-body">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <br /><br /><br /><br /><br />
                        <h1 class="brand-heading"><span ng-click="mc.createBlog()">J</span>ASON</h1> <hr><h1 class="brand-heading">HOANG</h1>
                        <p class="intro-text">
                            @*A free, responsive, one page Bootstrap theme.
                                <br>Created by Start Bootstrap.*@
                        </p>

                        <a ng-click="mc.goTo('blog')" class="btn btn-circle">
                            <i class="fa fa-angle-double-down animated"></i>
                        </a>
                        <br /><br /><br /><br /><br /><br /><br />
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- BLOG Section -->
    <section id="blog" class="container content-section">
        <div>
            <div class="row">

                <div class="col-md-8 container">
                    <div>
                        <h2 class="text-center">{{mc.selectedBlog.content? mc.selectedBlog.title : 'Select a blog!'}}</h2>
                        <h5 ng-bind-html="mc.selectedBlog.content" class="scrollerino"></h5>
                    </div>
                </div>
                <div class="col-md-4 container">
                    <h2 class="text-center">BLOGS</h2>
                    <hr />
                    <div ng-repeat="blog in mc.blogs" align="right">
                        <h5><a ng-click="mc.blogSelect(blog)">{{blog.title}}</a></h5>
                    </div>
                </div>
            </div>
            <br />
          
        </div>
        <div class="text-center">
            <a ng-click="mc.goTo('music')" class="btn btn-circle">
                <i class="fa fa-angle-double-down animated"></i>
            </a>
        </div>
    </section>

    <!-- MUSIC -->

    <section id="music" class="content-section text-center">
      
            <div class="container">
                <div class="col-lg-8 col-lg-offset-2">

                    <h2>MUSIC</h2>
                    <div id="charts">
                        <fusioncharts width="700"
                                      height="500"
                                      type="pie2d"
                                      datasource="{{mc.myDataSource}}">
                        </fusioncharts>
                    </div>
                </div>
        </div>
        <div class="text-center">
            <a ng-click="mc.goTo('contact')" class="btn btn-circle">
                <i class="fa fa-angle-double-down animated"></i>
            </a>
            <br /><br /><br /><br />
        </div>
    </section>
    <!-- END MUSIC SECTION-->

    <section id="fitbit" class="content-section text-center">
        <div class="download-section">
            <div class="container">
                <div class="col-lg-8 col-lg-offset-2">
                    <h2>FITBIT</h2>
              
                </div>
            </div>
        </div>
        <div class="text-center">
            <a ng-click="mc.goTo('contact')" class="btn btn-circle">
                <i class="fa fa-angle-double-down animated"></i>
            </a>
            <br /><br /><br /><br />
        </div>
    </section>



    <!-- Contact Section -->
    <section id="contact" class="content-section text-center">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <h2>Contact</h2>

                <div align="center">
                    <md-content style="background-color:black">

                        <md-button class="md-fab md-primary" style="background-color:#3bb7e8" ng-href="https://www.linkedin.com/in/jason-hoang-146961139/" aria-label="linkedIn">
                            <md-icon align="center" style="font-size:1.5em;" class="fa fa-linkedin"></md-icon>
                        </md-button>

                        <md-button class="md-fab md-primary" ng-href="" style="background-color:darkblue" aria-label="facebook">
                            <md-icon align="center" style="font-size:1.5em;" class="fa fa-facebook"></md-icon>
                        </md-button>

                        <md-button class="md-fab md-primary" ng-href="" style="background-color:#641d93" aria-label="instagram">
                            <md-icon align="center" style="font-size:1.5em;" class="fa fa-instagram"></md-icon>
                        </md-button>

                        <md-button class="md-fab md-primary" ng-href="" style="background-color:#ffe928" aria-label="ghost">
                            <md-icon align="center" style="font-size:1.5em;" class="fa fa-snapchat-ghost"></md-icon>
                        </md-button>

                        <md-button class="md-fab md-primary" ng-href="" style="background-color:#00bae0" aria-label="twitter">
                            <md-icon align="center" style="font-size:1.5em;" class="fa fa-twitter"></md-icon>
                        </md-button>

                        <md-button class="md-fab md-primary" ng-href="" style="background-color:#e00000" aria-label="google">
                            <md-icon align="center" style="font-size:1.5em;" class="fa fa-google"></md-icon>
                        </md-button>

                    </md-content>
                    <br /><br /><br /><br /><br /><br /><br />
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Theme JavaScript -->

@section scripts {
    <!-- FACTORY BEGIN-->
    <script>
        (function () {
            angular.module('myApp', ['ngMaterial', 'ngSanitize', 'ng-fusioncharts', 'ngAnimate']).factory('mainService', MainService);

            MainService.$inject = ['$http'];

            function MainService($http) {

                return {
                    getBlogs: _getBlogs,
                    getMusic: _getMusic
                }

                //GET BLOGS SECTION
                function _getBlogs() {
                    return $http.get('/api/blogs')
                        .then(onSuccessGetBlogs)
                        .catch(onError);
                }

                function onSuccessGetBlogs(response) {
                    //console.log('Successfully received data from GetBlogs');
                    return response.data;
                }
                //END GET BLOGS

                //GET MUSIC SECTION

                function _getMusic() {
                    return $http.get('http://ws.audioscrobbler.com/2.0/?method=user.gettopartists&user=jasonhoang88&limit=5&api_key=' + '@System.Configuration.ConfigurationManager.AppSettings["lastFm"]' +'&format=json')
                        .then(onSuccessGetTopArtists)
                        .catch(onError);
                }

                function onSuccessGetTopArtists(artists) {
                    //console.log("GOT THE MUZIX");
                    return artists.data;
                }
                //END MUSIC SECTION


                function onError() {
                    console.log("Error!");
                }


            }


        })();
    </script>
    <!-- FACTORY END-->
  
    <!-- CONTROLLER BEGIN-->
    <script>
        (function () {
            angular.module('myApp')
                .controller('mainController', MainController);

            MainController.$inject = ['$scope', 'mainService'];


            function MainController($scope, mainService) {
                var vm = this;
                vm.$scope = $scope;

                //SCROLL TO SECTION OF THE RESPECTIVE BUTTON
                vm.goTo = _goTo;


                //MUSIC

                //Blog service and functions
                vm.mainService = mainService;
                vm.blogs = null;
                vm.selectedBlog = null;
                vm.getBlogs = _getBlogs;
                vm.blogSelect = _blogSelect;
                vm.createBlog = _createBlog;
                vm.blogCounter = 0;

   
                vm.myDataSource = {
                        chart: {
                            "paletteColors": "#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000",

                            "caption": "Top Artists",
                            "subCaption": "By Play Count",
                            "numberPrefix": "Play count: ",
                            "valueFontSize": "14",
                            //Changing alpha of value font
                            "valueFontAlpha": "60",
                            "baseFontColor": "#FFFFFF",
                            "baseFont": "Montserrat",
                            //Changing alpha of value background
                            "bgColor": "#000000",
                            "bgAlpha": "100",
                            "showBorder": "0",
                            "showplotborder": "0",
                            "showPercentValues": "1",
                            "showPercentInToolTip": "0",
                            "toolTipBgColor": "#000000",
                            "showCanvasBase": "1",
                            "canvasBaseDepth": "14",
                            "canvasBgDepth": "5",
                            "canvasBaseColor": "#000000",
                            "canvasBgColor": "#000000",
                            "use3DLighting": "0",
                            "showShadow": "0",
                            "legendBgColor": "#000000",
                            "legendBorderAlpha": "0",
                            "legendShadow": "0",
                            "legendItemFontSize": "10",
                            "legendItemFontColor": "#ffffff",
                            "useDataPlotColorForLabels": "1",
                            "showLegend": "1",
                            "formatNumber": "1",
                            "thousandSeparatorPosition": "2,3",
                            "formatNumberScale": "0"
                        },
                       data: [
                         
                        ]
                    
                };

                render();

                function render() {
                         vm.getBlogs()
                        .then(onCompleteGetBlogs);

                         mainService.getMusic()
                             .then(fillTopArtists);
                }


                //MUSIC SECTION 
                    function _getMusic() {
                        return mainService.getMusic()
                            .then(fillTopArtists);
                    }

                    function fillTopArtists(data) {
                        console.log("data", data)
                        //console.log("ARTISTS GET");
                        var artistData = data.topartists.artist;
                        for (var i = 0; i < artistData.length; i++) {
                            var newItem = {
                                label: artistData[i].name,
                                value: artistData[i].playcount
                            }

                            vm.myDataSource.data.push(newItem);
                     
                        }
                        console.log(vm.myDataSource.data);
                    }
                //END MUSIC SECTION

                //BLOG SECTION
                function _getBlogs() {
                    return mainService.getBlogs()
                        .then(fillBlogItems)
                }

                function fillBlogItems(data) {
                    //console.log("Filling Blog items");
                    vm.blogs = data;
                }

                function onCompleteGetBlogs() {
                    console.log("Completed render and filling blog items");
                
                }

                function _blogSelect(item) {
                    vm.selectedBlog = item;
                    console.log(vm.selectedBlog);
                }

                function _createBlog() {
                    vm.blogCounter = vm.blogCounter + 1;

                    if (vm.blogCounter == 3) {
                        location.href = "/blogs";
                    } else { }

                    //switch (vm.blogCounter) {
                    //    case 1:
                    //    case 2:
                    //    case 3:
                    //}

                }
                //END BLOG SECTION

                //SCROLL TO SECTION OF THE RESPECTIVE BUTTON
                function _goTo(section) {
                    $('html, body').animate({
                        scrollTop: $('#' + section).offset().top
                    }, 1000);
                };
            }
        })();
    </script>
}
